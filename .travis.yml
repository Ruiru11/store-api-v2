language: python
python:
 - "3.6.4"

install:
  - pip install -r requirements.txt
  - pip install coveralls
  - pip install pytest-cov

services: 
  - postgresql

before_scripts:
  
  - psql -c "CREATE ROLE ruiru with createdb login PASSWORD 'hardto';" -U postgres
  - psql -c "CREATE DATABASE testdb owner ruiru" -U postgres

env:

  - TEST_DATABASE_URL=postgresql://ruiru:hardto@localhost/testdb

script: 
  -  pytest --cov=tests

after_success:
  - coveralls


